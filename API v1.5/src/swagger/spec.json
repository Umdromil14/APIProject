{"openapi":"3.0.0","info":{"title":"ratyagames API","version":"1.0.0"},"paths":{"/category":{"post":{"tags":["Category"],"description":"Creating a new category","requestBody":{"$ref":"#/components/requestBodies/CategoryToAdd"},"responses":{"201":{"$ref":"#/components/responses/CategoryAdded"},"400":{"description":"Invalid request body"},"404":{"description":"Type id or video game id not found"},"409":{"description":"Category already exists"},"500":{"description":"Internal server error"}}},"get":{"tags":["Category"],"description":"Get a category or all categories from a type or from a video game or just all the category","parameters":[{"name":"typeId","description":"The type id","in":"query","required":false,"schema":{"type":"integer"}},{"name":"videoGameId","description":"The video game id","in":"query","required":false,"schema":{"type":"integer"}}],"responses":{"200":{"$ref":"#/components/responses/CategoryFound"},"404":{"description":"No category found"},"500":{"description":"Internal server error"}}}},"/category/{typeId}/{videoGameId}":{"delete":{"tags":["Category"],"description":"Delete a category","parameters":[{"name":"typeId","description":"The type id","in":"path","required":true,"schema":{"type":"integer"}},{"name":"videoGameId","description":"The video game id","in":"path","required":true,"schema":{"type":"integer"}}],"responses":{"204":{"$ref":"#/components/responses/CategoryDeleted"},"400":{"description":"Id must be a number"},"404":{"description":"Category not found"},"500":{"description":"Internal server error"}}},"patch":{"tags":["Category"],"description":"Update a category","parameters":[{"name":"typeId","description":"The type id","in":"path","required":true,"schema":{"type":"integer"}},{"name":"videoGameId","description":"The video game id","in":"path","required":true,"schema":{"type":"integer"}}],"requestBody":{"$ref":"#/components/requestBodies/CategoryToUpdate"},"responses":{"204":{"$ref":"#/components/responses/CategoryUpdated"},"400":{"description":"Id must be a number or invalid request body"},"404":{"description":"Category or new type id or new video game id not found"},"409":{"description":"Category already exists with new type id and/or new video game id"},"500":{"description":"Internal server error"}}}},"/game":{"get":{"tags":["Game"],"description":"Get all games","responses":{"200":{"$ref":"#/components/responses/GamesFound"},"404":{"description":"No game found"},"500":{"description":"Internal server error"}}},"post":{"tags":["Game"],"description":"Add a game","requestBody":{"$ref":"#/components/requestBodies/GameToAdd"},"responses":{"201":{"$ref":"#/components/responses/GameAdded"},"400":{"description":"Invalid request body"},"404":{"description":"User id or publication id not found"},"409":{"description":"Game already exists"},"500":{"description":"Internal server error"}}}},"/game/{userId}":{"get":{"tags":["Game"],"description":"Get all games of a user","parameters":[{"name":"userId","description":"The id of the user","in":"path","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"$ref":"#/components/responses/GamesFound"},"400":{"description":"Id must be a number"},"404":{"description":"No game found"},"500":{"description":"Internal server error"}}}},"/game/{userId}/{publicationId}":{"get":{"tags":["Game"],"description":"Get a game","parameters":[{"name":"userId","description":"The id of the user","in":"path","required":true,"schema":{"type":"integer"}},{"name":"publicationId","description":"The id of the publication","in":"path","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"$ref":"#/components/responses/GameFound"},"400":{"description":"Id must be a number"},"404":{"description":"No game found"},"500":{"description":"Internal server error"}}},"patch":{"tags":["Game"],"description":"Update a game","parameters":[{"name":"userId","description":"The id of the user","in":"path","required":true,"schema":{"type":"integer"}},{"name":"publicationId","description":"The id of the publication","in":"path","required":true,"schema":{"type":"integer"}}],"requestBody":{"$ref":"#/components/requestBodies/GameToUpdate"},"responses":{"204":{"$ref":"#/components/responses/GameUpdated"},"400":{"description":"Id must be a number or invalid request body"},"404":{"description":"Game or new user id or new publication id not found"},"409":{"description":"Game already exists with new user id and/or new publication id"},"500":{"description":"Internal server error"}}},"delete":{"tags":["Game"],"description":"Delete a game","parameters":[{"name":"userId","description":"The id of the user","in":"path","required":true,"schema":{"type":"integer"}},{"name":"publicationId","description":"The id of the publication","in":"path","required":true,"schema":{"type":"integer"}}],"responses":{"204":{"$ref":"#/components/responses/GameDeleted"},"400":{"description":"Id must be a number"},"404":{"description":"Game not found"},"500":{"description":"Internal server error"}}}},"/platform":{"get":{"tags":["Platform"],"description":"Get all platforms","responses":{"200":{"$ref":"#/components/responses/PlatformsFound"},"404":{"description":"No platform found"},"500":{"description":"Internal server error"}}},"post":{"tags":["Platform"],"description":"Create a new platform","requestBody":{"$ref":"#/components/requestBodies/PlatformToAdd"},"responses":{"201":{"$ref":"#/components/responses/PlatformAdded"},"400":{"description":"Invalid request body"},"409":{"description":"Platform already exists"},"500":{"description":"Internal server error"}}}},"/platform/{code}":{"get":{"tags":["Platform"],"description":"Get a platform by its code","parameters":[{"name":"code","description":"The code of the platform","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"$ref":"#/components/responses/PlatformFound"},"404":{"description":"No platform found"},"500":{"description":"Internal server error"}}},"patch":{"tags":["Platform"],"description":"Update a platform","parameters":[{"name":"code","description":"The code of the platform","in":"path","required":true,"schema":{"type":"string"}}],"requestBody":{"$ref":"#/components/requestBodies/PlatformToUpdate"},"responses":{"204":{"$ref":"#/components/responses/PlatformUpdated"},"400":{"description":"Invalid request body"},"404":{"description":"Platform not found"},"409":{"description":"Platform already exists with new code"},"500":{"description":"Internal server error"}}},"delete":{"tags":["Platform"],"description":"Delete a platform","parameters":[{"name":"code","description":"The code of the platform","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"204":{"description":"Platform deleted"},"404":{"description":"Platform not found"},"500":{"description":"Internal server error"}}}},"/user/login":{"post":{"tags":["User"],"description":"Connect an user with his email and password and return a token","requestBody":{"$ref":"#/components/requestBodies/Login"},"responses":{"200":{"description":"The user is connected and a token is created"},"400":{"description":"The email/password is not correct or some fields are missing"},"404":{"description":"The user is not found"},"500":{"description":"Internal server error"}}}},"/user/{userId}":{"delete":{"tags":["User"],"description":"Delete one user with an admin account","security":[{"bearerAuth":[]}],"parameters":[{"name":"userId","description":"Id of the user the admin want to delete","in":"path","required":true,"schema":{"type":"integer"}}],"responses":{"204":{"description":"User deleted"},"400":{"description":"Id must be an Number"},"403":{"description":"Can't delete an admin account and must be an admin account"},"404":{"description":"User not found"},"500":{"description":"Internal server error"}}},"patch":{"tags":["User"],"description":"Update one user with an admin account","security":[{"bearerAuth":[]}],"requestBody":{"$ref":"#/components/requestBodies/updateUserFromAdmin"},"parameters":[{"name":"userId","description":"Id of the user to update","in":"path","required":true,"schema":{"type":"integer"}}],"responses":{"204":{"description":"User updated"},"400":{"description":"Id must be an Number or some fields are missing"},"403":{"description":"Must be an admin account"},"404":{"description":"User not found"},"409":{"description":"Email or username already exist"},"500":{"description":"Internal server error"}}},"get":{"tags":["User"],"description":"Get a specific user","parameters":[{"name":"userId","description":"Id of the user","in":"path","required":true,"schema":{"type":"integer"}}],"responses":{"202":{"description":"User found"},"500":{"description":"Internal server error"}}}},"/user/":{"delete":{"tags":["User"],"description":"Delete his own account","responses":{"204":{"description":"User deleted"},"403":{"description":"Can't delete an admin account"},"500":{"description":"Internal server error"}}},"patch":{"tags":["User"],"description":"Update his own account","requestBody":{"$ref":"#/components/requestBodies/updateMyAccount"},"responses":{"204":{"description":"User updated"},"400":{"description":"Wrong email format or some fields are missing"},"409":{"description":"Email or username already exist"},"500":{"description":"Internal server error"}}},"get":{"tags":["User"],"description":"Get all users","responses":{"202":{"description":"Users found"},"500":{"description":"Internal server error"}}},"post":{"tags":["User"],"description":"Create a user","requestBody":{"$ref":"#/components/requestBodies/createUser"},"responses":{"201":{"description":"User created"},"400":{"description":"Wrong email format"},"404":{"description":"Some fields are missing"},"409":{"description":"Email or username already exist"},"500":{"description":"Internal server error"}}}},"/user/insertWithGames":{"post":{"tags":["User"],"description":"Create a user with games","requestBody":{"$ref":"#/components/requestBodies/insertUserWithGames"},"responses":{"201":{"description":"User created with games"},"400":{"description":"Wrong email format"},"404":{"description":"Some fields are missing"},"409":{"description":"Email or username already exist"},"500":{"description":"Internal server error"}}}},"/videoGame/":{"get":{"tags":["VideoGame"],"description":"Get all video games","responses":{"202":{"$ref":"#/components/responses/VideoGamesFound"},"404":{"description":"No video games found"},"500":{"description":"Internal server error"}}},"post":{"tags":["VideoGame"],"description":"Create a new video game","requestBody":{"$ref":"#/components/requestBodies/createVideoGame"},"responses":{"201":{"description":"The video game is created"},"400":{"description":"Some fields are missing/incorrect"},"500":{"description":"Internal server error"}}}},"/videoGame/{id}":{"get":{"tags":["VideoGame"],"description":"Get a specific video game","parameters":[{"name":"id","description":"Id of the video game","in":"path","required":true,"schema":{"type":"integer"}}],"responses":{"202":{"$ref":"#/components/responses/VideoGameFound"},"400":{"description":"Id must be a Number"},"404":{"description":"Video game not found"},"500":{"description":"Internal server error"}}},"patch":{"tags":["VideoGame"],"description":"Update a video game by its id","requestBody":{"$ref":"#/components/requestBodies/updateVideoGame"},"parameters":[{"name":"id","description":"Id of the video game","in":"path","required":true,"schema":{"type":"integer"}}],"responses":{"204":{"description":"The video game is updated"},"400":{"description":"Some fields are missing"},"404":{"description":"Video game not found"},"500":{"description":"Internal server error"}}},"delete":{"tags":["VideoGame"],"description":"Delete a video game","parameters":[{"name":"id","description":"Id of the video game","in":"path","required":true,"schema":{"type":"integer"}}],"responses":{"204":{"description":"The video game is deleted"},"404":{"description":"The video game is not found"},"500":{"description":"Internal server error"}}}}},"components":{"schemas":{"Category":{"type":"object","properties":{"type_id":{"type":"integer","description":"The type id"},"video_game_id":{"type":"integer","description":"The video game id"}}},"Game":{"type":"object","properties":{"user_id":{"type":"integer","description":"The id of the user"},"publication_id":{"type":"integer","description":"The id of the publication"},"is_owned":{"type":"boolean","description":"Whether the user owns the game"},"review_rating":{"type":"integer","description":"The user's rating of the game"},"review_comment":{"type":"string","description":"The user's comment on the game"},"review_date":{"type":"string","format":"date","description":"The date of the user's review"}}},"Platform":{"type":"object","properties":{"code":{"type":"string","description":"The code of the platform"},"description":{"type":"string","description":"The description of the platform"}}},"Login":{"type":"object","properties":{"username/email":{"type":"string"},"password":{"type":"string"}}},"User":{"type":"object","properties":{"username":{"type":"string"},"email":{"type":"string"},"firstname":{"type":"string"},"lastname":{"type":"string"},"password":{"type":"string"}},"required":["username","email","password"]},"VideoGame":{"type":"object","properties":{"id":{"type":"integer"},"name":{"type":"string"},"description":{"type":"string"}},"required":["name","description"]}},"responses":{"CategoryAdded":{"description":"The category was added"},"CategoryFound":{"description":"Category(ies) was(were) found","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/Category"},{"type":"array","items":{"$ref":"#/components/schemas/Category"}}]}}}},"CategoryUpdated":{"description":"The category was updated"},"CategoryDeleted":{"description":"The category was deleted"},"GamesFound":{"description":"Games were found","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Game"}}}}},"GameFound":{"description":"A game was found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Game"}}}},"GameAdded":{"description":"The game was added"},"GameUpdated":{"description":"The game was updated"},"GameDeleted":{"description":"The game was deleted"},"PlatformFound":{"description":"A platform was found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Platform"}}}},"PlatformsFound":{"description":"Platforms were found","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Platform"}}}}},"PlatformAdded":{"description":"The platform was added"},"PlatformUpdated":{"description":"The platform was updated"},"PlatformDeleted":{"description":"A platform was deleted"},"VideoGamesFound":{"description":"The video game were found"},"VideoGameFound":{"description":"The video game was found"}},"requestBodies":{"CategoryToAdd":{"content":{"application/json":{"schema":{"type":"object","properties":{"type_id":{"type":"integer","description":"The type id"},"video_game_id":{"type":"integer","description":"The video game id"}},"required":["type_id","video_game_id"]}}}},"CategoryToUpdate":{"content":{"application/json":{"schema":{"type":"object","properties":{"type_id":{"type":"integer","description":"The type id"},"video_game_id":{"type":"integer","description":"The video game id"}}}}}},"GameToAdd":{"content":{"application/json":{"schema":{"type":"object","properties":{"user_id":{"type":"integer","description":"The id of the user"},"publication_id":{"type":"integer","description":"The id of the publication"},"is_owned":{"type":"boolean","description":"Whether the user owns the game"},"review_rating":{"type":"integer","description":"The user's rating of the game"},"review_comment":{"type":"string","description":"The user's comment on the game"},"review_date":{"type":"string","format":"date","description":"The date of the user's review"}},"required":["user_id","publication_id"]}}}},"GameToUpdate":{"content":{"application/json":{"schema":{"type":"object","properties":{"user_id":{"type":"integer","description":"The id of the user"},"publication_id":{"type":"integer","description":"The id of the publication"},"is_owned":{"type":"boolean","description":"Whether the user owns the game"},"review_rating":{"type":"integer","description":"The user's rating of the game"},"review_comment":{"type":"string","description":"The user's comment on the game"},"review_date":{"type":"string","format":"date","description":"The date of the user's review"}}}}}},"PlatformToAdd":{"content":{"application/json":{"schema":{"type":"object","properties":{"code":{"type":"string","description":"The code of the platform"},"description":{"type":"string","description":"The description of the platform"}},"required":["code","description"]}}}},"PlatformToUpdate":{"content":{"application/json":{"schema":{"type":"object","properties":{"code":{"type":"string","description":"The code of the platform"},"description":{"type":"string","description":"The description of the platform"}}}}}},"Login":{"content":{"application/json":{"schema":{"type":"object","properties":{"username/email":{"type":"string"},"password":{"type":"string","format":"password"}}}}}},"updateUserFromAdmin":{"content":{"application/json":{"schema":{"type":"object","properties":{"username":{"type":"string"},"email":{"type":"string"},"firstname":{"type":"string"},"lastname":{"type":"string"},"password":{"type":"string","format":"password"}}}}}},"updateMyAccount":{"content":{"application/json":{"schema":{"type":"object","properties":{"username":{"type":"string"},"email":{"type":"string"},"firstname":{"type":"string"},"lastname":{"type":"string"}}}}}},"insertUserWithGames":{"content":{"application/json":{"schema":{"type":"object","properties":{"username":{"type":"string"},"email":{"type":"string"},"firstname":{"type":"string"},"lastname":{"type":"string"},"password":{"type":"string","format":"password"},"games":{"type":"object","properties":{"games1":{"type":"array","items":{"oneOf":[{"type":"string"},{"type":"integer"}]}},"games2":{"type":"array","items":{"oneOf":[{"type":"string"},{"type":"integer"}]}},"gamesN":{"type":"array","items":{"oneOf":[{"type":"string"},{"type":"integer"}]}}}}},"required":["username","email","password","games"]}}}},"createUser":{"content":{"application/json":{"schema":{"type":"object","properties":{"username":{"type":"string"},"email":{"type":"string"},"firstname":{"type":"string"},"lastname":{"type":"string"},"password":{"type":"string","format":"password"}},"required":["username","email","password"]}}}},"createVideoGame":{"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string"},"description":{"type":"string"}}}}}},"updateVideoGame":{"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string"},"description":{"type":"string"}}}}}}},"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}}},"tags":[]}